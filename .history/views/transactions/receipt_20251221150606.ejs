<!DOCTYPE html>
<html>
<head>
    <title>Struk - <%= transaction.invoiceNumber %></title>
    <style>
        body { font-family: 'Courier New', Courier, monospace; width: 80mm; margin: 0 auto; font-size: 12px; }
        .text-center { text-align: center; }
        .line { border-bottom: 1px dashed #000; margin: 5px 0; }
        table { width: 100%; }
    </style>
</head>
<body onload="window.print()">
    <div class="text-center">
        <h3>SISFO BENGKEL</h3>
        <p>Invoice: <%= transaction.invoiceNumber %></p>
        <p><%= new Date(transaction.createdAt).toLocaleString('id-ID') %></p>
    </div>
    <div class="line"></div>
    <p>Pelanggan: <%= transaction.customerName %> (<%= transaction.vehicleLicense %>)</p>
    <div class="line"></div>
    <table>
        <% details.forEach(item => { %>
            <tr>
                <td colspan="2"><%= item.itemName %></td>
            </tr>
            <tr>
                <td><%= item.quantity %> x <%= item.pricePerUnit.toLocaleString('id-ID') %></td>
                <td align="right"><%= (item.quantity * item.pricePerUnit).toLocaleString('id-ID') %></td>
            </tr>
        <% }) %>
    </table>
    <div class="line"></div>
    <table>
        <tr>
            <td>Total:</td>
            <td align="right">Rp <%= transaction.totalAmount.toLocaleString('id-ID') %></td>
        </tr>
        <tr>
            <td>Diskon (<%= (transaction.discount || 0) %>%):</td>
            <td align="right">- Rp <%= ((transaction.totalAmount * (transaction.discount || 0)) / 100).toLocaleString('id-ID') %></td>
        </tr>
        <tr style="font-weight: bold;">
            <td>TOTAL AKHIR:</td>
            <td align="right">Rp <%= transaction.grandTotal.toLocaleString('id-ID') %></td>
        </tr>
    </table>
    <div class="line"></div>
    <p class="text-center">Terima Kasih Atas Kunjungan Anda</p>
</body>
</html>